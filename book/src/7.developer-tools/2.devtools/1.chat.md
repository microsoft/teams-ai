# ðŸ’¬ Devtools Chat

![Blank Devtools chat](https://github.com/microsoft/teams.ts/blob/main/assets/screenshots/devtools_blank_chat.png?raw=true)

Chat with your app the same way you would in teams without the need for an app id or authentication. This is useful for testing and debugging your app. As time goes on, we plan to add more features to DevTools that will allow a wider variety of testing. Stay tuned!

## Getting Started

You can use the Teams AI v2 dev package as a plugin for your app.

### Installation

Add the package to your Teams app.

```bash
$: npm install @microsoft/teams.dev
```

### Usage

In your app's main file, make sure DevTools plugin is added to the app.

```typescript
import { App } from "@microsoft/teams.apps";
import { ConsoleLogger } from "@microsoft/teams.common/logging";
import { DevtoolsPlugin } from "@microsoft/teams.dev";
//... Other imports here
const app = new App({
  logger: new ConsoleLogger("@samples/echo", { level: "debug" }),
  plugins: [new DevtoolsPlugin()]
});
```

When you run your app, for example `npm run dev`, devtools will be running on port 3001

```bash
[nodemon] watching extensions: ts
[nodemon] starting `node -r ts-node/register -r dotenv/config ./src/index.ts`
[INFO] @samples/echo/http listening on port 3000 ðŸš€
[INFO] @samples/echo/devtools available at http://localhost:3001/devtools
```

> [!NOTE]<br/>
> If you used the [CLI](../1.cli/) to create a TTK configuration for your app, DevTools will run on port 3979 when you launch the debugger.

When you open the page, you will see a Teams-like chat window and you can immediately interact with your app.

![Devtools chat](../../../../assets/screenshots/devtools-echo-chat.png)

## Teams chat terminology

Below is a brief list of the terminology used in the chat window and in Teams.

1. **Compose box**: The area where you can type your message. You can also attach files to your message here. A newly rendered Chat page will automatically focus the compose box.
2. **Message actions menu**: The menu that appears when you hover over or keyboard-focus a message. Different actions are available depending on whether you sent or received the message.

## Chat capabilities

The chat window emulates Teams features as closely as possible. Not all Teams features are available in DevTools, but we are working to add more features over time. The following capabilities are available in the chat window:

> [!CAUTION]<br/>
> Accessibility and keyboard navigation are not 100% supported in DevTools. We are working to improve this experience over time! Please know that we take accessibility seriously and are working to improve the experience for all users.

### Send messages
You can [send messages](../../3.essentials/3.sending-activities.md) to your app just like you would in Teams. The app will respond to the message and you can see the response in the chat window. Use the compose box to type a message and press enter to send it. Use the <kbd>Tab</kbd> key to navigate to the compose box and type your message. Press <kbd>Enter</kbd> to send the message.

### Attachments

 You can attach files to your messages. Click the attachment (paperclip) icon in the compose box and select how to attach your file. Currently, DevTools supports pasting an Adaptive Card JSON or attaching a card from the card designer. See the [Cards page](./3.cards.md) for more. More attachments support is coming soon!

 ### Connectivity

You can check the connectivity of your app in three ways.

1. The DevTools banner will show a green badge or indicate 'Connected' when your agent is successfully connected to DevTools. If your agent is not connected, the badge will be red or the text will be 'Disconnected'.
2. The agent's status will be shown in the via their avatar. If the agent is connected, the avatar will show a 'Connected' badge. If the agent is not connected, it will show a 'Disconnected' badge.
3. DevTools has a [Logger](../../5.in-depth-guides/6.observability/) that will add connectivity events to the console. Use the browser's developer tools to view the console logs.

### Message reactions

 You can [react to messages](../../9.activity/1.message/2.message-reaction.md) in the chat window. Hover over a message and click one of the emoji to react to it. Hover and click the same emoji or click the reaction button that was added to the chat message to remove the reaction. Reactions via keyboard input are also supported. Press <kbd>Enter</kbd> when focused on a message to open the message action menu. Then use the arrow keys and press <kbd>Enter</kbd> to select a reaction. Visit
![Devtools react to a message](https://github.com/microsoft/teams.ts/blob/main/assets/screenshots/devtools_message_reaction.gif?raw=true)

### Edit your message
You can [edit messages](../../9.activity/1.message/1.message-update.md) by hovering over your message and clicking the Edit (pencil) icon. This will open a compose box for that message, and if there are attachments, you can edit the attachments as well. Press <kbd>Enter</kbd> or press the checkmark button to send the edited message. Press the X button to cancel the edit.

### Delete your message

You can soft [delete messages](../../9.activity/1.message/3.message-delete.md) by hovering over your message, pressing the More (ellipsis) button then pressing the Delete (trash) icon. This will replace your message with text saying, "This message has been deleted. Undo". You can click the Undo text to restore the message.

### Streaming

If your agent is using [streaming](../../5.in-depth-guides/5.ai/1.chat/2.streaming.md), DevTools will automatically render messages as a stream to the chat window. Visually, the streamed message will have a rainbow border until the stream is ended. You can also see the stream in the Activities page by clicking the magnifying glass icon in the message actions menu of the message. This will open a new window with the full stream payload in [Activities](2.inspect.md).

### Feedback

You can send [feedback](../../5.in-depth-guides/5.ai/7.feedback.md) to your app by clicking the Feedback (thumbs up/down) icons in the message actions menu. This will open a dialog to add a feedback message.


> [!NOTE]<br/>
> The capabilities above will also populate activities to the Activities page, where you can inspect the payload.

### Developer message shortcut

For an easier debugging experience, we have added a features to the compose box that will store the last five messages sent to the app. To access this, simply press <kbd>â†‘</kbd> in the compose box and you can cycle through your message history and send that message.
![Devtools Up Arrow Feature](https://github.com/microsoft/teams.ts/blob/main/assets/screenshots/devtools_uparrow_feature.gif?raw=true)
