# Planner

A planner is a object that takes in a user's ask and returns back a plan on how to accomplish the request. The user's ask is in the form of a prompt or prompt template. It does this by using AI to mix and match atomic functions (called _actions_) registered to the AI system so that it can recombine them into series of steps that complete a goal.

This is a powerful concept because it allows you to create actions that can be used in ways that you as a developer may not have thought of.

For instance, If you have a task and `Summarize` & `SendEmail` action, the planner could combine them to create workflows like "Rewrite the following report into a short paragraph, and email it to johndoe@email.com" without you explicitly having to write code for those scenarios.

The planner is an extensible part of the AI system. This means that a custom planner can be created for your specific needs. Out of the box, the Teams AI library supports the following planners.


| Planner            | Description                                                                             | C#  | JS/TS | Python |
| ------------------ | --------------------------------------------------------------------------------------- | --- | ----- | ------ |
| [ActionPlanner](./ACTION-PLANNER.md)      | Powerful planner that uses LLMs to generate plans. It has a built-in prompt management, LLM modularity, amongst other features. | ✅  | ✅    | ❌     |
| AssistantsPlanner | A planner that uses OpenAI's Assistants APIs to generate plans.  | ✅  | ✅    | ❌     |

### Plan

A plan is the entity that is generated by the planner. It is a JSON object of the following shape:

```json
{
  "type": "plan",
  "commands": [
    {
      "type": "DO",
      "action": "<name>",
      "parameters": {
        "<name>": "<value>"
      }
    },
    {
      "type": "SAY",
      "response": "<response>"
    }
  ]
}
```

A plan consists of two types of commands:

- **SAY**: Sends a message to the user.
  - _response_: The string message to send.
- **DO**: AI system will execute a specific _action_, passing in the generated parameters.
  - _action_: A lambda function registered to the AI system
  - _parameters_: A dictionary passed to the action.

The JSON object string is returned by the LLM and deserialized into an object.

#### Example

Here's an example of a plan for the following ask:

User:
`Create a grocery shopping list and add bananas to it.`

Plan:

```json
{
  "type": "plan",
  "commands": [
    {
      "type": "DO",
      "action": "createList",
      "entities": {
        "name": "Grocery Shopping"
      }
    },
    {
      "type": "DO",
      "action": "addItem",
      "entities": {
        "name": "Bananas"
      }
    },
    {
      "type": "SAY",
      "response": "Created a grocery shopping list and added a banana to it."
    }
  ]
}
```

This plan is executed in sequential order. So first the list will be created and then an item will be added to it. Finally, the `response` message will be sent to the user.
